_format_version: "1.0"
table:
  name: EquipmentInstallation
  schema: dbo
  description: "Records the physical deployment history of a piece of equipment at a sampling location. Enables reconstructing which sensor was active at which location during any past interval."

  columns:
    - name: Installation_ID
      logical_type: integer
      nullable: false
      identity: true
      description: "Surrogate primary key"
    - name: Equipment_ID
      logical_type: integer
      nullable: false
      description: "Equipment that was installed"
      foreign_key:
        table: Equipment
        column: Equipment_ID
    - name: Sampling_point_ID
      logical_type: integer
      nullable: false
      description: "Sampling location where the equipment was installed"
      foreign_key:
        table: SamplingPoints
        column: Sampling_point_ID
    - name: InstalledDate
      logical_type: timestamp
      precision: 7
      nullable: false
      description: "Date and time the equipment was installed at this location (UTC)"
    - name: RemovedDate
      logical_type: timestamp
      precision: 7
      nullable: true
      description: "Date and time the equipment was removed (UTC). NULL means currently installed."
    - name: Campaign_ID
      logical_type: integer
      nullable: true
      description: "Campaign during which this installation occurred (if applicable)"
      foreign_key:
        table: Campaign
        column: Campaign_ID
    - name: Notes
      logical_type: string
      max_length: 500
      nullable: true
      description: "Free-text notes about the installation or removal"

  primary_key: [Installation_ID]

  indexes:
    - name: IX_EquipmentInstallation_Equipment
      columns: [Equipment_ID, InstalledDate]
      unique: false
      description: "Supports efficient lookup of deployment history for a specific equipment"
    - name: IX_EquipmentInstallation_SamplingPoint
      columns: [Sampling_point_ID, InstalledDate]
      unique: false
      description: "Supports efficient lookup of what equipment was at a location over time"
